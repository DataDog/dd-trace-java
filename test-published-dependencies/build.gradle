plugins {
  id 'com.diffplug.spotless' version '7.2.1'
}

def sharedConfigDirectory = "$rootDir/../gradle"
rootProject.ext.sharedConfigDirectory = sharedConfigDirectory

def isCI = providers.environmentVariable("CI").isPresent()
def versionFromFile = file("$rootDir/${isCI ? '../workspace' : '..'}/build/main.version").readLines().head()

allprojects {
  group = 'com.datadoghq'
  version = versionFromFile

  apply from: "$sharedConfigDirectory/repositories.gradle"
  apply from: "$sharedConfigDirectory/spotless.gradle"
}
