apply from: "$rootDir/gradle/java.gradle"

groovySpock {
  configureDefaultDependencies("compileOnly")
  configureDefaultDependencies("testImplementation")
}

dependencies {
  api libs.bytebuddy
  api libs.bytebuddyagent
  api libs.slf4j
  api libs.bundles.test.logging
  api libs.guava

  api project(':dd-java-agent:testing')

  implementation project(':dd-java-agent:agent-debugger')

  implementation(libs.junit.jupiter)
  implementation "org.junit.platform:junit-platform-runner:${libs.versions.junit.platform.get()}"

  testImplementation project(':dd-java-agent:instrumentation:trace-annotation')

  testImplementation group: 'cglib', name: 'cglib', version: '3.2.5'
  // test instrumenting java 1.1 bytecode
  testImplementation group: 'net.sf.jt400', name: 'jt400', version: '6.1'

  // We have autoservices defined in test subtree, looks like we need this to be able to properly rebuild this
  testAnnotationProcessor libs.autoservice.processor
  testCompileOnly libs.autoservice.annotation
}
