apply from: "$rootDir/gradle/java.gradle"

muzzle {
  extraRepository("confluent-releases", "https://packages.confluent.io/maven/")
  pass {
    group = "io.confluent"
    module = "kafka-schema-registry-client"
    versions = "[4.1.0,)"
    excludeDependency "org.codehaus.jackson:jackson-mapper-asl" // missing on some releases
    assertInverse = true
  }
}

dependencies {
  implementation project(':dd-java-agent:instrumentation:kafka:kafka-common')
  compileOnly group: 'io.confluent', name: 'kafka-schema-registry-client', version: '4.1.0'
  compileOnly group: 'io.confluent', name: 'kafka-avro-serializer', version: '4.1.0'
  compileOnly group: 'io.confluent', name: 'kafka-protobuf-serializer', version: '4.1.0'
  compileOnly group: 'org.apache.kafka', name: 'kafka-clients', version: '3.0.0'

  testImplementation project(':dd-java-agent:instrumentation:kafka:kafka-common')
  testImplementation group: 'io.confluent', name: 'kafka-schema-registry-client', version: '7.5.2'
  testImplementation group: 'io.confluent', name: 'kafka-avro-serializer', version: '7.5.2'
  testImplementation group: 'io.confluent', name: 'kafka-protobuf-serializer', version: '7.5.1'
  testImplementation group: 'org.apache.kafka', name: 'kafka-clients', version: '3.5.0'
  testImplementation group: 'org.apache.avro', name: 'avro', version: '1.11.0'
}

