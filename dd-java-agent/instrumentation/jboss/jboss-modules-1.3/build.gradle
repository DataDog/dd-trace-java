muzzle {
  pass {
    group = 'org.jboss.modules'
    module = 'jboss-modules'
    versions = '[1.3,)'
  }
}

apply from: "$rootDir/gradle/java.gradle"

addTestSuite("latestDepTest")

dependencies {
  compileOnly group: 'org.jboss.modules', name: 'jboss-modules', version: '1.3.0.Final'
  testImplementation group: 'org.jboss.modules', name: 'jboss-modules', version: '1.3.0.Final'
  // jboss-modules 2.1+ requires Java 11, so cap at 2.0.x to maintain Java 8 compatibility
  latestDepTestImplementation group: 'org.jboss.modules', name: 'jboss-modules', version: '2.0.+'
}

tasks.withType(Test).configureEach {
  if (it.javaVersion.isJava9Compatible()) {
    jvmArgs +='--add-exports=java.xml/com.sun.org.apache.xerces.internal.jaxp=ALL-UNNAMED'
  }
}
