ext {
  virtualThreadTestMinJavaVersionForTests = JavaVersion.VERSION_21
  //virtualThreadTestLatestDepTestMinJavaVersionForTests = JavaVersion.VERSION_21
}
muzzle {
  pass {
    coreJdk()
  }
}

apply from: "$rootDir/gradle/java.gradle"

addTestSuiteForDir('virtualThreadTest', 'virtualThreadTest')

[compileVirtualThreadTestGroovy, virtualThreadTest].each {
  it.javaLauncher = getJavaLauncherFor(21)
}

dependencies {
  testImplementation project(':dd-java-agent:instrumentation:trace-annotation')

  // test dependencies required for testing the executors we permit
  testImplementation 'org.apache.tomcat.embed:tomcat-embed-core:7.0.0'
  testImplementation deps.guava
  testImplementation group: 'io.netty', name: 'netty-all', version: '4.1.9.Final'
}
