plugins {
  id 'idea'
}

apply from: "$rootDir/gradle/java.gradle"
// Use slf4j-simple as default; logback has a high chance of getting stuck in a deadlock on CI.
apply from: "$rootDir/gradle/slf4j-simple.gradle"

testJvmConstraints {
  minJavaVersion = JavaVersion.VERSION_21
}

muzzle {
  pass {
    coreJdk('21')
  }
}

idea {
  module {
    jdkName = '21'
  }
}

// Set all compile tasks to use JDK21 but let instrumentation code targets 1.8 compatibility
tasks.withType(AbstractCompile).configureEach {
  configureCompiler(it, 21, JavaVersion.VERSION_1_8)
}

dependencies {
  testImplementation project(':dd-java-agent:instrumentation:trace-annotation')
}
