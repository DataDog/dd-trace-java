apply from: "$rootDir/gradle/java.gradle"

sourceSets {
  main_stub {
    java.srcDirs "${project.projectDir}/src/main/stub"
  }
}

dependencies {
  compileOnly files("$project.buildDir/classes/java/raw_stub")
}

project.afterEvaluate { p ->
  tasks.named("instrumentMain_stubJava") {
    enabled(false)
  }
  tasks.named("compileJava"){
    dependsOn tasks.named("compileMain_stubJava")
  }
}
