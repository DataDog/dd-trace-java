plugins {
  id "com.github.johnrengelman.shadow"
}
apply from: "${rootDir}/gradle/java.gradle"

repositories {
  maven {
    url "https://dl.bintray.com/nikolaymartynov/jmxfetch"
  }
}

dependencies {
  compile 'com.heliosapm.jmxlocal:jmxlocal:1.0'
  compile 'datadog:jmxfetch:0.20.13'
  compile deps.slf4j
  compile project(':dd-trace-api')
}

configurations {
  // exclude bootstrap dependencies from shadowJar
  runtime.exclude module: deps.opentracing
  runtime.exclude module: deps.slf4j
  runtime.exclude group: 'org.slf4j'
  runtime.exclude group: 'io.opentracing'
}

shadowJar {
  dependencies {
    exclude(project(':dd-java-agent:agent-bootstrap'))
    exclude(project(':dd-trace-api'))
  }
}

jar {
  classifier = 'unbundled'
}
