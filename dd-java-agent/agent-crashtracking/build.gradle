apply from: "$rootDir/gradle/java.gradle"

// FIXME: Improve test coverage.
minimumBranchCoverage = 0.6
// runtime dependent parts (eg. looking up values from the JVM args) are not easy to exercise in unit tests
// the minimum coverage is reduced to reflect that
// minimumInstructionCoverage = 0.9
minimumInstructionCoverage = 0.7

tasks.withType(Test).configureEach { subTask ->
  dependsOn ':dd-java-agent:shadowJar'
}

dependencies {
  implementation libs.slf4j
  implementation project(':communication')
  implementation project(':internal-api')
  implementation project(':utils:container-utils')
  implementation project(':utils:version-utils')

  implementation libs.okhttp
  implementation libs.moshi

  testImplementation libs.bundles.junit5
  testImplementation libs.bundles.mockito
  testImplementation group: 'com.squareup.okhttp3', name: 'mockwebserver', version: libs.versions.okhttp.legacy.get()
  testImplementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.10'
}

