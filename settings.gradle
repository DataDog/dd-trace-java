rootProject.name = 'sts-trace-java'

include ':sts-trace-ot'
include ':sts-java-agent'
include ':sts-java-agent:agent-bootstrap'
include ':sts-java-agent:agent-tooling'
include ':sts-java-agent:testing'
include ':sts-java-agent-ittests'
include ':dd-trace-api'


// instrumentation:
include ':sts-java-agent:instrumentation:apache-httpclient-4.3'
include ':sts-java-agent:instrumentation:aws-sdk'
include ':sts-java-agent:instrumentation:classloaders'
include ':sts-java-agent:instrumentation:datastax-cassandra-3.2'
include ':sts-java-agent:instrumentation:jax-rs-annotations'
include ':sts-java-agent:instrumentation:jax-rs-client'
include ':sts-java-agent:instrumentation:java-concurrent'
include ':sts-java-agent:instrumentation:java-concurrent:scala-testing'
include ':sts-java-agent:instrumentation:java-concurrent:akka-testing'
include ':sts-java-agent:instrumentation:jboss-classloading'
include ':sts-java-agent:instrumentation:jdbc'
include ':sts-java-agent:instrumentation:jedis-1.4'
include ':sts-java-agent:instrumentation:jms-1'
include ':sts-java-agent:instrumentation:jms-2'
include ':sts-java-agent:instrumentation:kafka-clients-0.11'
include ':sts-java-agent:instrumentation:kafka-streams-0.11'
include ':sts-java-agent:instrumentation:mongo-3.1'
include ':sts-java-agent:instrumentation:mongo-async-3.3'
include ':sts-java-agent:instrumentation:okhttp-3'
include ':sts-java-agent:instrumentation:osgi-classloading'
include ':sts-java-agent:instrumentation:servlet-2'
include ':sts-java-agent:instrumentation:servlet-3'
include ':sts-java-agent:instrumentation:spring-web'
include ':sts-java-agent:instrumentation:trace-annotation'


if (JavaVersion.current().isJava8Compatible()) {
  // java 8 only instrumentation
  include ':sts-java-agent:instrumentation:play-2.4'
  include ':sts-java-agent:instrumentation:play-2.4:play-2.6-testing'

  // benchmark
  include ':sts-java-agent:benchmark'
  include ':sts-java-agent:benchmark-integration'
  include ':sts-java-agent:benchmark-integration:jetty-perftest'

  // examples
  include ':examples:dropwizard-mongo-client'
  include ':examples:spring-boot-jdbc-redis'
  include ':examples:rest-spark'
}

def setBuildFile(project) {
  project.buildFileName = "${project.name}.gradle"
  project.children.each {
    setBuildFile(it)
  }
}

setBuildFile(rootProject)
